# Mini Agent Configuration - Optimized for MiniMax + Z.AI Integration
# Primary: MiniMax-M2 (300 prompts/5hrs) for reasoning
# Secondary: Z.AI GLM-4.6 (120 prompts/5hrs) for web intelligence

# ===== LLM Configuration =====
# MiniMax API Configuration (Primary - 300 prompts/5hrs)
api_key: "${MINIMAX_API_KEY}"
api_base: "https://api.minimax.io"   # Global platform
model: "MiniMax-M2"
# LLM provider: "anthropic" or "openai" 
# MiniMax uses OpenAI-compatible API for broad compatibility
provider: "openai"

# Optional: OpenAI SDK integration (fallback)
openai_api_key: "${OPENAI_API_KEY}"
openai_base: "https://api.openai.com/v1"
openai_model: "gpt-4"  # NOTE: Unused fallback - actual model is MiniMax-M2

# ===== Retry Configuration =====
retry:
  enabled: true           # Enable retry mechanism
  max_retries: 3          # Maximum number of retries
  initial_delay: 1.0      # Initial delay time (seconds)
  max_delay: 60.0         # Maximum delay time (seconds)
  exponential_base: 2.0   # Exponential backoff base

# ===== Agent Configuration =====
max_steps: 200  # Maximum execution steps
workspace_dir: "./workspace"  # Working directory
system_prompt_path: "system_prompt.md"  # System prompt file (same config directory)
debug: true

# ===== Tools Configuration =====
tools:
  # Basic tool switches
  enable_file_tools: true  # File read/write/edit tools (unlimited operations)
  enable_bash: true        # Bash command execution tool
  enable_note: true        # Session note tool (SessionNoteTool)

  # Z.AI Tools - PROTECTED for credit consumption prevention
  # ‚úÖ OpenAI web functions implemented using GLM-4.6 backend
  # ‚ö†Ô∏è  CRITICAL: Only GLM-4.6 is FREE with Lite plan - GLM-4.5 CHARGES MONEY!
  # üîí CREDIT PROTECTION: Disabled by default to prevent accidental consumption
  #    To enable: Set enable_zai_search: true (will consume ~120 prompts/5hrs)
  enable_zai_search: false   # Z.AI Web Search: DISABLED - Credit protection active
  enable_zai_llm: false     # Direct Z.AI LLM: DISABLED - Credit protection
  zai_settings:
    # ‚ö†Ô∏è CRITICAL: Only use glm-4.6 (FREE) - NEVER use glm-4.5 (PAID)
    default_model: "glm-4.6"       # ‚úÖ FREE with Lite plan - DO NOT CHANGE
    search_model: "glm-4.6"        # ‚úÖ FREE with Lite plan - DO NOT CHANGE
    max_tokens_per_prompt: 2000    # Prevent excessive token usage (was 357k!)
    max_search_results: 10         # Reasonable limit for quota management
    track_usage: true              # Monitor coding plan usage (~120 prompts/5hrs)
    efficiency_mode: true          # Optimize for coding plan constraints
    # Direct Z.AI API integration (correct approach - proven in transaction logs)
    use_direct_api: true           # Use direct Z.AI API calls (not OpenAI SDK)
    zai_base: "https://api.z.ai/api/coding/paas/v4"  # Verified working endpoint

  # Claude Skills (15 specialized skills)
  enable_skills: true      # Enable Skills system
  skills_dir: "./skills"   # Skills directory path

  # MCP Tools
  enable_mcp: true         # Enable MCP tools
  mcp_config_path: ".mcp.json"  # MCP configuration file (standard naming)
                           # Note: API Keys for MCP tools configured in mcp.json