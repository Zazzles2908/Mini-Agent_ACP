# Create a professional canvas design visualization
import matplotlib.pyplot as plt
import matplotlib.patches as patches
from matplotlib.patches import FancyBboxPatch, Circle, Ellipse, Wedge
import numpy as np
from matplotlib.patches import Polygon
from matplotlib.colors import LinearSegmentedColormap

# Create figure with high DPI for quality
fig, ax = plt.subplots(1, 1, figsize=(20, 14), dpi=300)
ax.set_xlim(0, 100)
ax.set_ylim(0, 100)
ax.axis('off')

# Define evolutionary color palette
colors = {
    'core_system': '#1e3a8a',      # Deep blue for core
    'core_light': '#3b82f6',       # Medium blue
    'skills_system': '#059669',    # Green for skills
    'skills_light': '#10b981',     # Light green
    'integration': '#dc2626',      # Red for integration
    'integration_light': '#ef4444', # Light red
    'documentation': '#6b7280',    # Gray for docs
    'background': '#f8fafc',       # Light background
    'organic_accent': '#f59e0b',   # Amber for organic elements
    'white': '#ffffff',
    'text_primary': '#1f2937',
    'text_secondary': '#6b7280'
}

# Background with subtle organic texture
bg_rect = patches.Rectangle((2, 2), 96, 96, linewidth=0, facecolor=colors['background'], alpha=0.3)
ax.add_patch(bg_rect)

# Title with sophisticated typography
ax.text(50, 92, 'Mini-Agent System Evolution', fontsize=32, fontweight='300', 
        ha='center', va='center', color=colors['text_primary'], family='sans-serif')

# Create organic central system core
center_x, center_y = 50, 60
core_ellipse = Ellipse((center_x, center_y), 25, 18, facecolor=colors['core_system'], 
                      alpha=0.8, edgecolor=colors['core_light'], linewidth=2)
ax.add_patch(core_ellipse)

# Core system internal elements with organic connections
core_components = [
    (center_x-8, center_y+3, 'TASK\nROUTER'),
    (center_x+8, center_y+3, 'STATE\nMGR'),
    (center_x-5, center_y-4, 'ERROR\nHANDLER'),
    (center_x+5, center_y-4, 'AI\nINTEGRATION')
]

for x, y, label in core_components:
    # Organic component nodes
    node = Circle(xy=(x, y), radius=3, facecolor=colors['core_light'], 
                  alpha=0.9, edgecolor=colors['white'], linewidth=1)
    ax.add_patch(node)
    ax.text(x, y, label, fontsize=8, fontweight='bold', ha='center', va='center', 
            color=colors['white'], linespacing=1.2)

# Create organic skills framework around the core
skills_positions = [
    (25, 85, 'DESIGN\nSKILLS', colors['skills_system']),
    (75, 85, 'DOCUMENT\nSKILLS', colors['integration']),
    (20, 50, 'WEB\nTESTING', colors['skills_system']),
    (80, 50, 'INTEGRATION\nTOOLS', colors['integration']),
    (35, 25, 'DEVELOPMENT\nWORKFLOW', colors['documentation']),
    (65, 25, 'VISUALIZATION\nTOOLS', colors['documentation'])
]

for x, y, label, color in skills_positions:
    # Organic skill category container
    skill_ellipse = Ellipse((x, y), 18, 12, facecolor=color, alpha=0.3, 
                           edgecolor=color, linewidth=2, linestyle='-')
    ax.add_patch(skill_ellipse)
    
    # Individual skill nodes
    individual_skills = [
        (x-5, y+2, 'Canvas'),
        (x+5, y+2, 'Doc'),
        (x-5, y-2, 'Web'),
        (x+5, y-2, 'Code')
    ]
    
    for sx, sy, s_label in individual_skills:
        skill_node = Circle(xy=(sx, sy), radius=2, facecolor=color, alpha=0.7, 
                           edgecolor=colors['white'], linewidth=1)
        ax.add_patch(skill_node)
        ax.text(sx, sy-3, s_label, fontsize=6, ha='center', va='center', 
                color=colors['text_secondary'], linespacing=1.1)

# Create organic integration layer
integration_x = 15
integration_y = 75
platforms = ['OpenAI', 'MiniMax', 'Z.AI', 'GitHub']
platform_colors = [colors['integration'], colors['skills_system'], colors['core_system'], colors['documentation']]

for i, (platform, color) in enumerate(zip(platforms, platform_colors)):
    platform_x = integration_x + (i * 15)
    platform_y = integration_y
    
    # Organic platform connection
    connection = Ellipse((platform_x, platform_y), 8, 6, facecolor=color, 
                        alpha=0.6, edgecolor=colors['white'], linewidth=1)
    ax.add_patch(connection)
    ax.text(platform_x, platform_y-8, platform, fontsize=7, ha='center', va='center', 
            color=colors['text_secondary'], linespacing=1.1)
    
    # Organic connection lines to core
    from_x, from_y = center_x - 12, center_y + 6
    to_x, to_y = platform_x + 4, platform_y
    
    # Create curved connection
    mid_x = (from_x + to_x) / 2
    mid_y = (from_y + to_y) / 2 + 5  # Slight curve upward
    
    # Draw curved connection
    curve_points = np.array([
        [from_x, from_y],
        [mid_x, mid_y],
        [to_x, to_y]
    ])
    
    curve = Polygon(curve_points, facecolor=color, alpha=0.3, edgecolor=color, linewidth=1)
    ax.add_patch(curve)

# Create documentation ecosystem with organic clustering
doc_positions = [
    (85, 75, '100+ Documents', colors['documentation']),
    (85, 65, 'Visual Guides', colors['skills_system']),
    (85, 55, 'Navigation', colors['integration']),
    (85, 45, 'Quick Start', colors['core_system'])
]

for x, y, label, color in doc_positions:
    doc_box = FancyBboxPatch((x-5, y-2), 10, 4, boxstyle="round,pad=0.3", 
                           facecolor=color, alpha=0.4, edgecolor=color, linewidth=1)
    ax.add_patch(doc_box)
    ax.text(x, y, label, fontsize=8, ha='center', va='center', 
            color=colors['text_primary'], linespacing=1.2)

# Add organic data flow indicators
flow_positions = [
    (30, 80), (70, 80), (30, 30), (70, 30), (50, 40)
]

for i, (x, y) in enumerate(flow_positions):
    # Organic flow markers
    flow_node = Circle(xy=(x, y), radius=1.5, facecolor=colors['organic_accent'], 
                      alpha=0.6, edgecolor=colors['white'], linewidth=1)
    ax.add_patch(flow_node)

# Add system evolution indicators
evolution_markers = [
    (35, 65, '14+ Skills'),
    (65, 65, 'Multiple AI'),
    (50, 45, 'Full Dev Env'),
    (50, 70, 'Enterprise Grade')
]

for x, y, marker in evolution_markers:
    ax.text(x, y, marker, fontsize=9, ha='center', va='center', 
            color=colors['text_secondary'], weight='light',
            bbox=dict(boxstyle="round,pad=0.2", facecolor=colors['white'], 
                     alpha=0.8, edgecolor=colors['text_secondary'], linewidth=0.5))

# Add subtle organic background elements
for i in range(5):
    bg_x = np.random.uniform(5, 95)
    bg_y = np.random.uniform(5, 95)
    bg_radius = np.random.uniform(0.5, 1.5)
    bg_circle = Circle(xy=(bg_x, bg_y), radius=bg_radius, 
                      facecolor=colors['organic_accent'], alpha=0.1)
    ax.add_patch(bg_circle)

# Add sophisticated legend with organic styling
legend_box = FancyBboxPatch((8, 10), 25, 8, boxstyle="round,pad=0.5", 
                          facecolor=colors['white'], alpha=0.9, 
                          edgecolor=colors['text_secondary'], linewidth=1)
ax.add_patch(legend_box)

ax.text(20.5, 16, 'SYSTEM ECOSYSTEM', fontsize=12, fontweight='bold', 
        ha='center', va='center', color=colors['text_primary'])

legend_items = [
    (12, 14, 'Core System', colors['core_system']),
    (12, 13, 'Skills Framework', colors['skills_system']),
    (12, 12, 'Integration Layer', colors['integration']),
    (12, 11, 'Documentation', colors['documentation'])
]

for x, y, label, color in legend_items:
    legend_circle = Circle(xy=(x-1, y), radius=0.3, facecolor=color, alpha=0.8)
    ax.add_patch(legend_circle)
    ax.text(x+0.5, y, label, fontsize=8, ha='left', va='center', 
            color=colors['text_secondary'])

# Add metrics box with organic styling
metrics_box = FancyBboxPatch((67, 10), 25, 8, boxstyle="round,pad=0.5", 
                           facecolor=colors['white'], alpha=0.9, 
                           edgecolor=colors['text_secondary'], linewidth=1)
ax.add_patch(metrics_box)

ax.text(79.5, 16, 'SYSTEM CAPABILITIES', fontsize=12, fontweight='bold', 
        ha='center', va='center', color=colors['text_primary'])

metrics_text = """• 14+ Specialized Skills
• Enterprise-Grade Architecture
• Multiple AI Integrations
• Professional Documentation
• Visual Learning Support
• Full Development Environment"""

ax.text(79.5, 13, metrics_text, fontsize=8, ha='center', va='center', 
        color=colors['text_secondary'], linespacing=1.4)

# Save the figure with high quality
plt.tight_layout()
plt.savefig('documents/VISUALS/03_CANVAS_DESIGN_SYSTEM_EVOLUTION.png', dpi=300, 
           bbox_inches='tight', facecolor='white', edgecolor='none', 
           pad_inches=0.1)
plt.close()

print("Canvas Design visualization created successfully!")
print("File saved as: documents/VISUALS/03_CANVAS_DESIGN_SYSTEM_EVOLUTION.png")
